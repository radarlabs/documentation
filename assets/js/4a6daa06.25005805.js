"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3958],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return u}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=c(a),u=r,h=m["".concat(s,".").concat(u)]||m[u]||d[u]||o;return a?n.createElement(h,i(i({ref:t},p),{},{components:a})):n.createElement(h,i({ref:t},p))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=a[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},970:function(e,t,a){a.d(t,{Z:function(){return c}});var n=a(7294),r="alert_19nB",o="alertWarning_1tiz",i="alertInfo_1EfW",l="alertTip_1W6d",s="alertSuccess_7EZp",c=function(e){var t=e.children,a=e.alertType;return"warning"===a?n.createElement("div",{className:"alert "+r+" "+o,role:"alert"},t):"info"===a?n.createElement("div",{className:"alert "+r+" "+i,role:"alert"},t):"tip"===a?n.createElement("div",{className:"alert "+r+" "+l,role:"alert"},t):"success"===a?n.createElement("div",{className:"alert "+r+" "+s,role:"alert"},t):null}},8930:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return p},default:function(){return m}});var n=a(7462),r=a(3366),o=(a(7294),a(3905)),i=a(970),l={title:"Places"},s=void 0,c={unversionedId:"places",id:"places",isDocsHomePage:!1,title:"Places",description:"Places is available on the { }",source:"@site/docs/places.mdx",sourceDirName:".",slug:"/places",permalink:"/documentation/places",editUrl:"https://github.com/radarlabs/docs/edit/main/docs/places.mdx",tags:[],version:"current",frontMatter:{title:"Places"},sidebar:"defaultSidebar",previous:{title:"Trips",permalink:"/documentation/trip-tracking"},next:{title:"Regions",permalink:"/documentation/regions"}},p=[{value:"Quickstart",id:"quickstart",children:[]},{value:"How it works",id:"how-it-works",children:[]},{value:"Confidence",id:"confidence",children:[]},{value:"Categories",id:"categories",children:[]},{value:"Chains",id:"chains",children:[{value:"Mappings",id:"mappings",children:[]},{value:"Metadata",id:"metadata",children:[]}]},{value:"Place filters",id:"place-filters",children:[]},{value:"State blocklist",id:"state-blocklist",children:[]},{value:"Verify events",id:"verify-events",children:[]},{value:"Place matching",id:"place-matching",children:[{value:"How it works",id:"how-it-works-1",children:[]},{value:"Geofence types",id:"geofence-types",children:[]},{value:"Advanced options",id:"advanced-options",children:[]}]}],d={toc:p};function m(e){var t=e.components,l=(0,r.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,n.Z)({},d,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)(i.Z,{alertType:"info",mdxType:"Alert"},"Places is available on the "," ",(0,o.kt)("a",{href:"https://radar.com/pricing",target:"_blank"},"Enterprise plan"),"."),(0,o.kt)("p",null,"With Places, you can use our points-of-interest (POI) database to detect when a user visits a place, chain, or category, even if you haven't set up geofences for those places."),(0,o.kt)("p",null,"Our database includes millions of places around the world from open and commercial datasets, with coverage for major chains (like McDonald's or Walmart) and categories (like airports or stadiums), often with accurate polygon geometry and additional metadata like address or operating hours."),(0,o.kt)("img",{className:"hero-image--small",src:"https://images.ctfassets.net/f2vbu16fzuly/5SOzJ3H2StLCXe7HOZ7Bwh/7bbe802954a39517d9e475774af7b731/places_event.svg"}),(0,o.kt)("p",null,"Places provides the following user context:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "place": {\n    "name": "Starbucks",\n    "chain": {\n      "name": "Starbucks",\n      "slug": "starbucks",\n      "externalId": "123",\n      "metadata": {\n        "customFlag": true\n      }\n    },\n    "categories": ["food-beverage", "coffee-shop"],\n    "location": {\n      "type": "Point",\n      "coordinates": [-73.977797, 40.783826]\n    }\n  }\n}\n')),(0,o.kt)("p",null,"Places also provides the following events:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"user.entered_place")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"user.exited_place"))),(0,o.kt)("p",null,"You can receive events client-side via the ",(0,o.kt)("a",{parentName:"p",href:"/sdk"},"SDK")," or server-side via ",(0,o.kt)("a",{parentName:"p",href:"/integrations"},"event integrations"),", including webhooks."),(0,o.kt)("p",null,"You can enable Places on the ",(0,o.kt)("a",{parentName:"p",href:"https://radar.com/dashboard/settings"},"Settings page"),"."),(0,o.kt)("p",null,"Alternatively, if you have your own custom place data, you can create geofences instead. Learn more about ",(0,o.kt)("a",{parentName:"p",href:"/geofences"},"Geofences"),"."),(0,o.kt)("h2",{id:"quickstart"},"Quickstart"),(0,o.kt)("p",null,"First, ",(0,o.kt)("a",{parentName:"p",href:"https://radar.com/signup"},"sign up")," for Radar and get an API key."),(0,o.kt)("p",null,"Then, enable Places events and enable chains or categories on the ",(0,o.kt)("a",{parentName:"p",href:"https://radar.com/dashboard/settings"},"Settings page"),"."),(0,o.kt)("p",null,"From there, ",(0,o.kt)("a",{parentName:"p",href:"/documentation/sdk"},"integrate the SDK")," and call ",(0,o.kt)("inlineCode",{parentName:"p"},"Radar.trackOnce()")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"Radar.startTracking()"),", depending on your use case. Radar will generate an entry event on the first stopped location update at a place matching your enabled chains or categories."),(0,o.kt)("h2",{id:"how-it-works"},"How it works"),(0,o.kt)("p",null,"Radar generates a place entry event if a user stops at a place (i.e., when ",(0,o.kt)("inlineCode",{parentName:"p"},"stopped")," is ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," based on ",(0,o.kt)("a",{parentName:"p",href:"/sdk/tracking"},"tracking options")," or when ",(0,o.kt)("inlineCode",{parentName:"p"},"foreground")," is ",(0,o.kt)("inlineCode",{parentName:"p"},"true"),") matching ",(0,o.kt)("a",{parentName:"p",href:"#place-filters"},"filters")," with sufficient confidence, then a place exit event when the user leaves the place with sufficient confidence."),(0,o.kt)("p",null,"All place events have ",(0,o.kt)("a",{parentName:"p",href:"#confidence"},"confidence levels"),", and places may have one or more ",(0,o.kt)("a",{parentName:"p",href:"/places#categories"},"categories")," and a ",(0,o.kt)("a",{parentName:"p",href:"/places#chains"},"chain"),"."),(0,o.kt)("h2",{id:"confidence"},"Confidence"),(0,o.kt)("p",null,"All place events have confidence levels. Confidence levels range from ",(0,o.kt)("inlineCode",{parentName:"p"},"1")," (low) to ",(0,o.kt)("inlineCode",{parentName:"p"},"3")," (high). Confidence is a function of the accuracy of the location reported by the device, the footprint of the place, the density of the area, the popularity of the place, and other signals."),(0,o.kt)("p",null,"You may decide to ignore events based on confidence levels."),(0,o.kt)("h2",{id:"categories"},"Categories"),(0,o.kt)("p",null,"Places may have one or more categories. Radar supports hundreds of categories, organized in a hierarchy. View the ",(0,o.kt)("a",{parentName:"p",href:"/places/categories"},"full list of categories"),"."),(0,o.kt)("p",null,"You can listen for place events with specific categories. For example, to do something if a user is at an airport, on ",(0,o.kt)("a",{parentName:"p",href:"/sdk#ios"},"iOS"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-swift"},'Radar.trackOnce { (status, location, events, user) in\n    if let place = user?.place,\n       place.hasCategory("airport") {\n        // do something\n    }\n}\n')),(0,o.kt)("h2",{id:"chains"},"Chains"),(0,o.kt)("p",null,"Places may have a chain. Radar supports thousands of U.S. and international chains. View the ",(0,o.kt)("a",{parentName:"p",href:"/places/chains"},"full list of chains"),"."),(0,o.kt)("p",null,"You can listen for place events with specific chains. For example, to do something when a user stops at a Starbucks, on ",(0,o.kt)("a",{parentName:"p",href:"/sdk#android"},"Android"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},'public void onEventsReceived(Context context,\n                             RadarEvent[] events,\n                             RadarUser user) {\n    for (RadarEvent event : events) {\n        if (event.type == RadarEventType.USER_ENTERED_PLACE &&\n            event.confidence == RadarEventConfidence.HIGH &&\n            event.place.isChain("starbucks")) {\n            // do something\n        }\n    }\n}\n')),(0,o.kt)("h3",{id:"mappings"},"Mappings"),(0,o.kt)("p",null,"To map Radar chain slugs to custom IDs, set ",(0,o.kt)("em",{parentName:"p"},"Chain mappings")," under ",(0,o.kt)("em",{parentName:"p"},"Places")," on the ",(0,o.kt)("a",{parentName:"p",href:"https://radar.com/dashboard/settings"},"Settings page"),"."),(0,o.kt)("p",null,"You can set a JSON string representing a dictionary with keys and values of type string."),(0,o.kt)("p",null,"For example, to map ",(0,o.kt)("inlineCode",{parentName:"p"},"burger-king")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"123")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"mcdonalds")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"456"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{ "burger-king": "123", "mcdonalds": "456" }\n')),(0,o.kt)("p",null,"Custom chain IDs will be exposed as ",(0,o.kt)("inlineCode",{parentName:"p"},"place.chain.externalId")," in user context and events. These custom IDs can also be used in place of chain slugs when performing searches with the ",(0,o.kt)("a",{parentName:"p",href:"/api#search-places"},"search places API"),"."),(0,o.kt)("h3",{id:"metadata"},"Metadata"),(0,o.kt)("p",null,"To map Radar chain slugs to custom metadata, set ",(0,o.kt)("em",{parentName:"p"},"Chain metadata")," under ",(0,o.kt)("em",{parentName:"p"},"Places")," on the ",(0,o.kt)("a",{parentName:"p",href:"https://radar.com/dashboard/settings"},"Settings page"),"."),(0,o.kt)("p",null,"You can set a JSON string with values of type dictionary, each with between 1 and 16 keys and values of type string, boolean, or number."),(0,o.kt)("p",null,"For example, to map ",(0,o.kt)("inlineCode",{parentName:"p"},"metadata.category")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"metadata.offers")," for ",(0,o.kt)("inlineCode",{parentName:"p"},"burger-king")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"mcdonalds"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "burger-king": { "category": "Restaurant", "offers": true },\n  "mcdonalds": { "category": "Restaurant", "offers": false }\n}\n')),(0,o.kt)("p",null,"Custom chain metadata will be exposed as ",(0,o.kt)("inlineCode",{parentName:"p"},"place.chain.metadata")," in user context and events."),(0,o.kt)("h2",{id:"place-filters"},"Place filters"),(0,o.kt)("p",null,"We recommend filtering events to specific categories or chains under ",(0,o.kt)("em",{parentName:"p"},"Places")," on the ",(0,o.kt)("a",{parentName:"p",href:"https://radar.com/dashboard/settings"},"Settings page"),"."),(0,o.kt)("p",null,"For example, to monitor only fast food restaurants, you might add ",(0,o.kt)("inlineCode",{parentName:"p"},"fast-food-restaurant")," to category filters, or add ",(0,o.kt)("inlineCode",{parentName:"p"},"burger-king"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"mcdonalds"),", and others to chain filters."),(0,o.kt)("p",null,"View the ",(0,o.kt)("a",{parentName:"p",href:"/places#categories"},"full list of categories")," and the ",(0,o.kt)("a",{parentName:"p",href:"/places#chains"},"full list of chains"),"."),(0,o.kt)("h2",{id:"state-blocklist"},"State blocklist"),(0,o.kt)("p",null,"To suppress tracking specific place categories in certain states, set ",(0,o.kt)("em",{parentName:"p"},"Category state blocklist mapping")," under ",(0,o.kt)("em",{parentName:"p"},"Places")," on the ",(0,o.kt)("a",{parentName:"p",href:"https://radar.com/dashboard/settings"},"Settings page"),"."),(0,o.kt)("p",null,"For example, blocking the ",(0,o.kt)("inlineCode",{parentName:"p"},"fast-food-restaurant")," category in New York would bypass visits to ",(0,o.kt)("inlineCode",{parentName:"p"},"fast-food-restaurant")," places in New York."),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"/regions"},"Regions")," must be enabled to expose this setting."),(0,o.kt)("h2",{id:"verify-events"},"Verify events"),(0,o.kt)("p",null,"You can accept or reject places events after user check-ins or other forms of verification. Event verifications will be used to improve the accuracy and confidence level of future events."),(0,o.kt)("p",null,"For example, to accept an event on iOS:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-swift"},"Radar.acceptEventId(event._id, verifiedPlaceId: event.alternatePlaces[0]._id)\n")),(0,o.kt)("h2",{id:"place-matching"},"Place matching"),(0,o.kt)(i.Z,{alertType:"info",mdxType:"Alert"},"Place matching is available on the "," ",(0,o.kt)("a",{href:"https://radar.com/pricing",target:"_blank"},"Enterprise plan"),"."),(0,o.kt)("p",null,"Place matching is the easiest way to make sure your geofence coordinates and geometries are accurate and stay up-to-date over time. Place matching will ensure that entry and exit events are reliable, trip approaching and arrived signals are precise, and messaging for nearby locations is relevant."),(0,o.kt)("p",null,"Navigate to the ",(0,o.kt)("a",{parentName:"p",href:"https://radar.com/dashboard/geofences"},"Geofences page")," and select ",(0,o.kt)("em",{parentName:"p"},"Import"),". If ",(0,o.kt)("a",{parentName:"p",href:"/places"},"Places")," are enabled for your project, toggle ",(0,o.kt)("em",{parentName:"p"},"Enable place matching")," on."),(0,o.kt)("h3",{id:"how-it-works-1"},"How it works"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Import your geofences against Radar's places data.")," Select ",(0,o.kt)("a",{parentName:"p",href:"/places/chains"},"chains")," to match your geofences against while importing your geofences into Radar.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"View the results of place matching.")," After the import has completed, look at the results on the ",(0,o.kt)("a",{parentName:"p",href:"https://radar.com/dashboard/geofences/imports"},"Import history page"),". Click ",(0,o.kt)("em",{parentName:"p"},"View import")," to see a summary and logs that indicate the outcome for each row. If the place match was successful, the import log will contain a link to the Radar place and the distance that the geofence center was corrected.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Filter and export the results for further analysis.")," Apply ",(0,o.kt)("em",{parentName:"p"},"Filters")," to isolate rows that were not place matched, geofences that have large center correction values, or errors. Click ",(0,o.kt)("em",{parentName:"p"},"Export rows")," to download a CSV of the results."))),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"PlaceMatching.gif",src:a(2549).Z})),(0,o.kt)("h3",{id:"geofence-types"},"Geofence types"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"circle"),": When a ",(0,o.kt)("inlineCode",{parentName:"li"},"circle")," geofence is matched, it will take on the geometry of the Radar place."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"polygon"),": When a ",(0,o.kt)("inlineCode",{parentName:"li"},"polygon")," geofence is matched, it will be linked to the Radar place, but not adopt the place center or geometry."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"isochrone"),": When an ",(0,o.kt)("inlineCode",{parentName:"li"},"isochrone")," geofence is matched, it will only take on the center of the Radar place, regenerating the ",(0,o.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Isochrone_map"},"isochrone")," geometry from the new center.")),(0,o.kt)("h3",{id:"advanced-options"},"Advanced options"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Search radius.")," Place matching will look for the nearest location within 10 kilometers by default. This value can be reduced to enforce a tighter search distance."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Geofence tag(s).")," Filter the rows to place match. For example, only perform place matching on rows where ",(0,o.kt)("inlineCode",{parentName:"li"},"tag = store")," but not ",(0,o.kt)("inlineCode",{parentName:"li"},"tag = nearby"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Use Radar's place geometry.")," By default, ",(0,o.kt)("inlineCode",{parentName:"li"},"circle")," geofences will adopt both the center and geometry of the Radar place. Toggle this off for ",(0,o.kt)("inlineCode",{parentName:"li"},"circle")," geofences to take on the center but not the geometry.")))}m.isMDXComponent=!0},2549:function(e,t,a){t.Z=a.p+"assets/images/place_matching-a01ba4b97da8fda20fce00e981438b19.gif"}}]);