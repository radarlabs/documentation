"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9172],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=d(n),m=r,k=c["".concat(s,".").concat(m)]||c[m]||u[m]||i;return n?a.createElement(k,o(o({ref:t},p),{},{components:n})):a.createElement(k,o({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var d=2;d<i;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},8215:function(e,t,n){var a=n(7294);t.Z=function(e){var t=e.children,n=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},1395:function(e,t,n){n.d(t,{Z:function(){return s}});var a=n(7294),r=n(944),i=n(6010),o="tabItem_1uMI",l="tabItemActive_2DSg";var s=function(e){var t,n=e.lazy,s=e.block,d=e.defaultValue,p=e.values,u=e.groupId,c=e.className,m=a.Children.toArray(e.children),k=null!=p?p:m.map((function(e){return{value:e.props.value,label:e.props.label}})),g=null!=d?d:null==(t=m.find((function(e){return e.props.default})))?void 0:t.props.value,h=(0,r.Z)(),f=h.tabGroupChoices,v=h.setTabGroupChoices,N=(0,a.useState)(g),y=N[0],b=N[1],w=[];if(null!=u){var O=f[u];null!=O&&O!==y&&k.some((function(e){return e.value===O}))&&b(O)}var A=function(e){var t=e.currentTarget,n=w.indexOf(t),a=k[n].value;b(a),null!=u&&(v(u,a),setTimeout((function(){var e,n,a,r,i,o,s,d;(e=t.getBoundingClientRect(),n=e.top,a=e.left,r=e.bottom,i=e.right,o=window,s=o.innerHeight,d=o.innerWidth,n>=0&&i<=d&&r<=s&&a>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(l),setTimeout((function(){return t.classList.remove(l)}),2e3))}),150))},S=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a=w.indexOf(e.target)+1;n=w[a]||w[0];break;case"ArrowLeft":var r=w.indexOf(e.target)-1;n=w[r]||w[w.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":s},c)},k.map((function(e){var t=e.value,n=e.label;return a.createElement("li",{role:"tab",tabIndex:y===t?0:-1,"aria-selected":y===t,className:(0,i.Z)("tabs__item",o,{"tabs__item--active":y===t}),key:t,ref:function(e){return w.push(e)},onKeyDown:S,onFocus:A,onClick:A},null!=n?n:t)}))),n?(0,a.cloneElement)(m.filter((function(e){return e.props.value===y}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},m.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==y})}))))}},9443:function(e,t,n){var a=(0,n(7294).createContext)(void 0);t.Z=a},944:function(e,t,n){var a=n(7294),r=n(9443);t.Z=function(){var e=(0,a.useContext)(r.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e}},970:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(7294),r="alert_19nB",i="alertWarning_1tiz",o="alertInfo_1EfW",l="alertTip_1W6d",s="alertSuccess_7EZp",d=function(e){var t=e.children,n=e.alertType;return"warning"===n?a.createElement("div",{className:"alert "+r+" "+i,role:"alert"},t):"info"===n?a.createElement("div",{className:"alert "+r+" "+o,role:"alert"},t):"tip"===n?a.createElement("div",{className:"alert "+r+" "+l,role:"alert"},t):"success"===n?a.createElement("div",{className:"alert "+r+" "+s,role:"alert"},t):null}},1511:function(e,t,n){var a=n(7294),r=n(944);t.Z=function(){var e=(0,r.Z)(),t=e.tabGroupChoices,n=e.setTabGroupChoices;return(0,a.useEffect)((function(){t.ios||n("ios","swift"),t.android||n("android","kotlin")}),[]),""}},5020:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return p},contentTitle:function(){return u},metadata:function(){return c},toc:function(){return m},default:function(){return g}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=n(1395),l=n(8215),s=n(1511),d=n(970),p={sidebar_label:"Flutter",title:"Flutter Package",description:"Documentation for Flutter Package"},u=void 0,c={unversionedId:"sdk/flutter",id:"sdk/flutter",isDocsHomePage:!1,title:"Flutter Package",description:"Documentation for Flutter Package",source:"@site/docs/sdk/flutter.mdx",sourceDirName:"sdk",slug:"/sdk/flutter",permalink:"/sdk/flutter",editUrl:"https://github.com/radarlabs/docs/edit/main/docs/sdk/flutter.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"Flutter",title:"Flutter Package",description:"Documentation for Flutter Package"},sidebar:"defaultSidebar",previous:{title:"Capacitor",permalink:"/sdk/capacitor"},next:{title:"MAUI",permalink:"/sdk/maui"}},m=[{value:"Install",id:"install",children:[{value:"iOS",id:"ios",children:[]},{value:"Android",id:"android",children:[]}]},{value:"Integrate",id:"integrate",children:[{value:"Import module",id:"import-module",children:[]},{value:"Initialize",id:"initialize",children:[]},{value:"Identify user",id:"identify-user",children:[]},{value:"Request permissions",id:"request-permissions",children:[]},{value:"Foreground tracking",id:"foreground-tracking",children:[]},{value:"Background tracking",id:"background-tracking",children:[]},{value:"Mock tracking",id:"mock-tracking",children:[]},{value:"Trip tracking",id:"trip-tracking",children:[]},{value:"Manual tracking",id:"manual-tracking",children:[]},{value:"Location metadata",id:"location-metadata",children:[]},{value:"Other APIs",id:"other-apis",children:[]}]},{value:"Support",id:"support",children:[]}],k={toc:m};function g(e){var t=e.components,n=(0,r.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,a.Z)({},k,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)(s.Z,{mdxType:"DefaultContextValues"}),(0,i.kt)("p",null,"This is the documentation for the Flutter package. Before integrating, read the ",(0,i.kt)("a",{parentName:"p",href:"/sdk"},"native SDK documentation")," to familiarize yourself with the platform."),(0,i.kt)("p",null,"See the source on GitHub ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/radarlabs/flutter-radar"},"here"),". Or, see the ",(0,i.kt)("inlineCode",{parentName:"p"},"flutter_radar")," package on pub.dev ",(0,i.kt)("a",{parentName:"p",href:"https://pub.dev/packages/flutter_radar"},"here"),"."),(0,i.kt)("h2",{id:"install"},"Install"),(0,i.kt)("p",null,"Add the package to your ",(0,i.kt)("inlineCode",{parentName:"p"},"pubspec.yaml")," file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"dependencies:\n  flutter_radar: ^$RADAR_FLUTTER_SDK_VERSION$\n")),(0,i.kt)("p",null,"Then, update dependencies:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"flutter pub get\n")),(0,i.kt)("h3",{id:"ios"},"iOS"),(0,i.kt)("p",null,"Change to the ",(0,i.kt)("inlineCode",{parentName:"p"},"ios/")," directory. In the ",(0,i.kt)("inlineCode",{parentName:"p"},"Podfile"),", add ",(0,i.kt)("inlineCode",{parentName:"p"},"platform :ios, '10.0'")," or higher to your target."),(0,i.kt)("p",null,"On iOS, you must add location usage descriptions and background modes to your ",(0,i.kt)("inlineCode",{parentName:"p"},"Info.plist"),". Initialize the SDK in ",(0,i.kt)("inlineCode",{parentName:"p"},"application:didFinishLaunchingWithOptions:")," in ",(0,i.kt)("inlineCode",{parentName:"p"},"AppDelegate.m")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"AppDelegate.swift"),", passing in your Radar publishable API key."),(0,i.kt)(o.Z,{groupId:"ios",defaultValue:"swift",values:[{label:"Swift",value:"swift"},{label:"Objective-C",value:"objc"}],mdxType:"Tabs"},(0,i.kt)(l.Z,{value:"swift",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},'import UIKit\nimport Flutter\n\nimport RadarSDK\n\n@UIApplicationMain\n@objc class AppDelegate: FlutterAppDelegate {\n  override func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {\n    Radar.initialize(publishableKey: "prj_test_pk_...")\n    GeneratedPluginRegistrant.register(with: self)\n    return super.application(application, didFinishLaunchingWithOptions: launchOptions)\n  }\n}\n'))),(0,i.kt)(l.Z,{value:"objc",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-objc"},'#import "AppDelegate.h"\n#import "GeneratedPluginRegistrant.h"\n\n#import <RadarSDK/RadarSDK.h>\n\n@implementation AppDelegate\n\n- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {\n  [GeneratedPluginRegistrant registerWithRegistry:self];\n  [Radar initializeWithPublishableKey:"prj_test_pk_..."];\n  return [super application:application didFinishLaunchingWithOptions:launchOptions];\n}\n\n@end\n')))),(0,i.kt)("h3",{id:"android"},"Android"),(0,i.kt)("p",null,"On Android, add the Radar Android SDK to the ",(0,i.kt)("inlineCode",{parentName:"p"},"dependencies")," section of your Android app's ",(0,i.kt)("inlineCode",{parentName:"p"},"build.gradle")," file. Ensure the Android SDK version matches the version of your Radar Flutter package."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},"dependencies {\n    implementation 'io.radar:sdk:$RADAR_FLUTTER_ANDROID_SDK_VERSION_WITHOUT_PATCH$.+'\n}\n")),(0,i.kt)(d.Z,{alertType:"info",mdxType:"Alert"},"When upgrading the SDK, ensure the Android SDK version is updated to match the plugin's pinned version. For details on the latest SDK releases, see the"," ",(0,i.kt)("a",{href:"https://github.com/radarlabs/flutter-radar/releases"},"releases page")," ","on GitHub."),(0,i.kt)("p",null,"Initialize the SDK in ",(0,i.kt)("inlineCode",{parentName:"p"},"onCreate()")," in ",(0,i.kt)("inlineCode",{parentName:"p"},"MainApplication.java"),", passing in your Radar publishable API key. If your Flutter Android app is in Kotlin, add a ",(0,i.kt)("inlineCode",{parentName:"p"},"Application.kt")," file and reference this as the application name in your Android manifest."),(0,i.kt)(o.Z,{groupId:"android",defaultValue:"kotlin",values:[{label:"Java",value:"java"},{label:"Kotlin",value:"kotlin"}],mdxType:"Tabs"},(0,i.kt)(l.Z,{value:"java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'import io.flutter.app.FlutterApplication;\nimport io.flutter.view.FlutterMain;\n\nimport io.radar.sdk.Radar;\n\npublic class MainApplication extends FlutterApplication {\n\n  @Override\n  public void onCreate() {\n      super.onCreate();\n      Radar.initialize(this, "prj_test_pk_...");\n      FlutterMain.startInitialization(this);\n  }\n}\n'))),(0,i.kt)(l.Z,{value:"kotlin",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'import io.flutter.app.FlutterApplication\nimport io.flutter.embedding.engine.FlutterEngine\nimport io.flutter.plugin.common.PluginRegistry\nimport io.flutter.plugins.GeneratedPluginRegistrant\n\nimport io.radar.sdk.Radar\n\nclass Application : FlutterApplication(), PluginRegistry.PluginRegistrantCallback {\n\n  override fun onCreate() {\n      super.onCreate()\n      Radar.initialize(this, "prj_test_pk_...")\n  }\n\n  override fun registerWith(registry: PluginRegistry) {\n      GeneratedPluginRegistrant.registerWith(FlutterEngine(this))\n  }\n}\n')))),(0,i.kt)("p",null,"For background tracking without a foreground service, and if targeting API level ",(0,i.kt)("inlineCode",{parentName:"p"},"29")," or higher, Radar also requires the ",(0,i.kt)("inlineCode",{parentName:"p"},"ACCESS_BACKGROUND_LOCATION")," permission. You must add the ",(0,i.kt)("inlineCode",{parentName:"p"},"ACCESS_BACKGROUND_LOCATION")," permission to your manifest manually:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<manifest xmlns:android="http://schemas.android.com/apk/res/android">\n    <uses-permission android:name="android.permission.ACCESS_BACKGROUND_LOCATION" />\n</manifest>\n')),(0,i.kt)("h2",{id:"integrate"},"Integrate"),(0,i.kt)("h3",{id:"import-module"},"Import module"),(0,i.kt)("p",null,"First, import the package:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"import 'package:flutter_radar/flutter_radar.dart';\n")),(0,i.kt)("h3",{id:"initialize"},"Initialize"),(0,i.kt)("p",null,"When your app starts, initialize the SDK with your publishable key."),(0,i.kt)("p",null,"Use your ",(0,i.kt)("inlineCode",{parentName:"p"},"Test Publishable")," key for testing and non-production environments. Use your ",(0,i.kt)("inlineCode",{parentName:"p"},"Live Publishable")," key for production environments."),(0,i.kt)(d.Z,{alertType:"warning",mdxType:"Alert"},"Note that you should always use your publishable API keys, which are restricted in scope, in the SDK. Do not use your secret API keys, which are unrestricted in scope, in any client-side code."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"Radar.initialize(publishableKey);\n")),(0,i.kt)("h3",{id:"identify-user"},"Identify user"),(0,i.kt)("p",null,"To identify the user when logged in, call:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"Radar.setUserId(userId);\n")),(0,i.kt)("p",null,"where ",(0,i.kt)("inlineCode",{parentName:"p"},"userId")," is a stable unique ID for the user."),(0,i.kt)("p",null,"To set an optional dictionary of custom metadata for the user, call:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"Radar.setMetadata(metadata);\n")),(0,i.kt)("p",null,"where ",(0,i.kt)("inlineCode",{parentName:"p"},"metadata")," is a map with up to 16 keys and values of type string, boolean, or number."),(0,i.kt)("p",null,"Finally, to set an optional description for the user, displayed in the dashboard, call:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"Radar.setDescription(description);\n")),(0,i.kt)("p",null,"where ",(0,i.kt)("inlineCode",{parentName:"p"},"description")," is a string."),(0,i.kt)("p",null,"You only need to call these functions once, as these settings will be persisted across app sessions."),(0,i.kt)("p",null,"Learn about platform-specific implementations of these functions in the ",(0,i.kt)("a",{parentName:"p",href:"/sdk/ios"},"iOS SDK documentation")," and ",(0,i.kt)("a",{parentName:"p",href:"/sdk/android"},"Android SDK documentation"),"."),(0,i.kt)("h3",{id:"request-permissions"},"Request permissions"),(0,i.kt)("p",null,"Before tracking the user's location, the user must have granted location permissions for the app."),(0,i.kt)("p",null,"To determine the whether user has granted location permissions for the app, call:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"String status = await Radar.getPermissionsStatus();\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"status")," will be a string, one of:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"GRANTED_FOREGROUND"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"GRANTED_BACKGROUND"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"DENIED"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"NOT_DETERMINED")))),(0,i.kt)("p",null,"To request location permissions for the app, call:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"String status = await Radar.requestPermissions(background);\n")),(0,i.kt)("p",null,"where ",(0,i.kt)("inlineCode",{parentName:"p"},"background")," is a boolean indicating whether to request background location permissions or foreground location permissions."),(0,i.kt)("p",null,"Learn about platform-specific permissions in the ",(0,i.kt)("a",{parentName:"p",href:"/sdk/ios"},"iOS SDK documentation")," and ",(0,i.kt)("a",{parentName:"p",href:"/sdk/android"},"Android SDK documentation"),"."),(0,i.kt)("h3",{id:"foreground-tracking"},"Foreground tracking"),(0,i.kt)("p",null,"Once you have initialized the SDK and the user has granted permissions, you can track the user's location."),(0,i.kt)("p",null,"To track the user's location in the foreground, call:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"var res = await Radar.trackOnce();\n// do something with res['status'], res['location'], res['events'], res['user']\n")),(0,i.kt)("p",null,"Learn about platform-specific implementations of this function in the ",(0,i.kt)("a",{parentName:"p",href:"/sdk/ios"},"iOS SDK documentation")," and ",(0,i.kt)("a",{parentName:"p",href:"/sdk/android"},"Android SDK documentation"),"."),(0,i.kt)("h3",{id:"background-tracking"},"Background tracking"),(0,i.kt)("p",null,"On iOS and Android, once you have initialized the SDK and the user has granted permissions, you can start tracking the user's location in the background."),(0,i.kt)("p",null,"For background tracking, the SDK supports custom tracking options as well as three presets:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"EFFICIENT")),": A low frequency of location updates and lowest battery usage. On Android, avoids Android vitals bad behavior thresholds."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"RESPONSIVE")),": A medium frequency of location updates and low battery usage. Suitable for most consumer use cases."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"CONTINUOUS")),': A high frequency of location updates and higher battery usage. Suitable for on-demand use cases (e.g., delivery tracking) and some consumer use cases (e.g., order ahead, "mall mode").')),(0,i.kt)("p",null,"Learn about platform-specific implementations of these presets in the ",(0,i.kt)("a",{parentName:"p",href:"/sdk/ios"},"iOS SDK documentation")," and ",(0,i.kt)("a",{parentName:"p",href:"/sdk/android"},"Android SDK documentation"),"."),(0,i.kt)("p",null,"To start tracking the user's location in the background, call one of:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"Radar.startTracking('efficient');\n\nRadar.startTracking('responsive');\n\nRadar.startTracking('continuous');\n")),(0,i.kt)("p",null,"You only need to call these methods once, as these settings will be persisted across app sessions."),(0,i.kt)("p",null,"Though we recommend using presets for most use cases, you can customize the tracking options. See the ",(0,i.kt)("a",{parentName:"p",href:"/sdk/tracking"},"tracking options reference"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"// optionally adjust foreground service options for Android\nRadar.setForegroundServiceOptions({\n  'text': \"Location tracking started\",\n  'title': \"Location updates\",\n  'importance': 2,\n  'updatesOnly': false,\n  'activity': 'com.yourapp.MainActivity'\n});\n\nRadar.startTrackingCustom({\n  desiredStoppedUpdateInterval: 180,\n  desiredMovingUpdateInterval: 60,\n  desiredSyncInterval: 50,\n  desiredAccuracy: 'high',\n  stopDuration: 140,\n  stopDistance: 70,\n  sync: 'all',\n  replay: 'none',\n  showBlueBar: true,\n  foregroundServiceEnabled: true\n});\n")),(0,i.kt)("p",null,"To determine whether tracking has been started, call:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"Radar.isTracking();\n")),(0,i.kt)("p",null,"To stop tracking the user's location in the background (e.g., when the user logs out), call:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"Radar.stopTracking();\n")),(0,i.kt)("p",null,"Learn about platform-specific implementations of these functions in the ",(0,i.kt)("a",{parentName:"p",href:"/sdk/ios"},"iOS SDK documentation")," and ",(0,i.kt)("a",{parentName:"p",href:"/sdk/android"},"Android SDK documentation"),"."),(0,i.kt)("p",null,"To listen for events, location updates, and errors, you can add event listeners:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"\n@pragma('vm:entry-point')\nstatic void onClientLocation(Map result) {\n  // do something with result.location\n}\n\n@pragma('vm:entry-point')\nstatic void onLocation(Map result) {\n  // do something with result.location, result.user\n}\n\n@pragma('vm:entry-point')\nstatic void onEvents(Map result) {\n  // do something with result.events, result.user\n}\n\n@pragma('vm:entry-point')\nstatic void onError(Map err) {\n  // do something with err\n}\n\nRadar.onClientLocation(onClientLocation);\nRadar.onLocation(onLocation);\nRadar.onEvents(onEvents);\nRadar.onError(onError);\n")),(0,i.kt)(d.Z,{alertType:"warning",mdxType:"Alert"},"Listeners should be set only once and before tracking begins."),(0,i.kt)("p",null,"Add event listeners outside of your view lifecycle if you want them to work when the app is in the background."),(0,i.kt)("h3",{id:"mock-tracking"},"Mock tracking"),(0,i.kt)("p",null,"On iOS and Android, you can simulate a sequence of location updates for testing. For example, to simulate a sequence of 10 location updates every 3 seconds by car from an ",(0,i.kt)("inlineCode",{parentName:"p"},"origin")," to a ",(0,i.kt)("inlineCode",{parentName:"p"},"destination"),", we can call:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"Radar.mockTracking(\n  origin: {'latitude': 40.714708, 'longitude': -74.035807},\n  destination: {'latitude': 40.717410, 'longitude': -74.053334},\n  mode: 'car',\n  steps: 10,\n  interval: 3);\n")),(0,i.kt)("h3",{id:"trip-tracking"},"Trip tracking"),(0,i.kt)("p",null,"On iOS and Android, to start a trip to a destination, call:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},'Radar.startTrip(\n  tripOptions: {\n  "externalId": \'299\',\n  "destinationGeofenceTag": \'store\',\n  "destinationGeofenceExternalId": \'123\',\n  "mode": \'car\'\n  },\n  trackingOptions: {\n    "desiredStoppedUpdateInterval": 30,\n    "fastestStoppedUpdateInterval": 30,\n    "desiredMovingUpdateInterval": 30,\n    "fastestMovingUpdateInterval": 30,\n    "desiredSyncInterval": 20,\n    "desiredAccuracy": "high",\n    "sync": "all",\n    "showBlueBar": true,\n    "foregroundServiceEnabled": true\n  }\n);\n')),(0,i.kt)("p",null,"Later, to complete the trip, call:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"Radar.completeTrip();\n")),(0,i.kt)("p",null,"Or, to cancel the trip, call:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"Radar.cancelTrip();\n")),(0,i.kt)("p",null,"If tracking was disabled before the trip started, it will stop after the trip ends. Otherwise, it will revert to the tracking options in use before the trip started."),(0,i.kt)("p",null,"Learn more about ",(0,i.kt)("a",{parentName:"p",href:"/trip-tracking"},"trip tracking"),"."),(0,i.kt)("h3",{id:"manual-tracking"},"Manual tracking"),(0,i.kt)("p",null,"You can manually update the user's location by calling:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"var res = await Radar.trackOnce({\n  'latitude': 39.2904,\n  'longitude': -76.6122,\n  'accuracy': 65\n});\n// do something with res['status'], res['location'], res['events'], res['user']\n")),(0,i.kt)("p",null,"Learn about platform-specific implementation of this function in the ",(0,i.kt)("a",{parentName:"p",href:"/sdk/ios"},"iOS SDK documentation")," and ",(0,i.kt)("a",{parentName:"p",href:"/sdk/android"},"Android SDK documentation"),"."),(0,i.kt)("h3",{id:"location-metadata"},"Location metadata"),(0,i.kt)("p",null,"The SDK can also pass along information like motion activity detection, speed and heading via the location metadata field."),(0,i.kt)("p",null,"Learn about platform-specific implementation of this function in the ",(0,i.kt)("a",{parentName:"p",href:"/sdk/ios"},"iOS SDK documentation")," and ",(0,i.kt)("a",{parentName:"p",href:"/sdk/android"},"Android SDK documentation"),"."),(0,i.kt)("h3",{id:"other-apis"},"Other APIs"),(0,i.kt)("p",null,"The Flutter package also exposes APIs for anonymous context, geocoding, search, and distance."),(0,i.kt)("h4",{id:"get-location"},"Get location"),(0,i.kt)("p",null,"Get a single location update without sending it to the server:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"var coordinates = await Radar.getLocation();\n")),(0,i.kt)("h4",{id:"context"},"Context"),(0,i.kt)("p",null,"With the ",(0,i.kt)("a",{parentName:"p",href:"/api#context"},"context API"),", get context for a location without sending device or user identifiers to the server:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"var res = await Radar.getContext({\n  'latitude': 40.783826,\n  'longitude': -73.975363,\n  'accuracy': 65\n});\n// do something with res['status'], res['context']\n")),(0,i.kt)("h4",{id:"geocoding"},"Geocoding"),(0,i.kt)("p",null,"With the ",(0,i.kt)("a",{parentName:"p",href:"/api#forward-geocode"},"forward geocoding API"),", geocode an address, converting address to coordinates:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"var res = await Radar.geocode('20 jay st brooklyn ny')\n// do something with res['status'], res['addresses']\n")),(0,i.kt)("p",null,"With the ",(0,i.kt)("a",{parentName:"p",href:"/api#reverse-geocode"},"reverse geocoding API"),", reverse geocode a location, converting coordinates to address:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"var res = await Radar.reverseGeocode({\n  'latitude': 40.783826,\n  'longitude': -73.975363,\n  'accuracy': 65\n});\n// do something with res['status'], res['addresses']\n")),(0,i.kt)("p",null,"With the ",(0,i.kt)("a",{parentName:"p",href:"/api#ip-geocode"},"IP geocoding API"),", geocode the device's current IP address, converting IP address to city, state, and country:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"var res = await Radar.ipGeocode((result) => {\n// do something with res['status'], res['address']\n")),(0,i.kt)("h4",{id:"search"},"Search"),(0,i.kt)("p",null,"With the ",(0,i.kt)("a",{parentName:"p",href:"/api#autocomplete"},"autocomplete API"),", autocomplete partial addresses and place names, sorted by relevance:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"var res = await Radar.autocomplete(\n  query: 'brooklyn roasting',\n  near: {'latitude': 40.783826, 'longitude': -73.975363},\n  limit: 10);\n// do something with res['status'], res['addresses']\n")),(0,i.kt)("p",null,"With the ",(0,i.kt)("a",{parentName:"p",href:"/api#search-geofences"},"geofence search API"),", search for geofences near a location, sorted by distance:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"var res = await Radar.searchGeofences(\n  near: {'latitude': 40.783826, 'longitude': -73.975363},\n  radius: 1000,\n  tags: ['venue'],\n  limit: 10);\n// do something with res['status'], res['geofences']\n")),(0,i.kt)("p",null,"With the ",(0,i.kt)("a",{parentName:"p",href:"/api#search-places"},"places search API"),", search for places near a location, sorted by distance:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"var res = await Radar.searchPlaces(\n  near: {'latitude': 40.783826, 'longitude': -73.975363},\n  radius: 1000,\n  chains: ['starbucks'],\n  limit: 10);\n// do something with res['status'], res['places']\n")),(0,i.kt)("h4",{id:"distance"},"Distance"),(0,i.kt)("p",null,"With the ",(0,i.kt)("a",{parentName:"p",href:"/api#distance"},"distance API"),", calculate the travel distance and duration from an origin to a destination:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"var res = await Radar.getDistance(\n  origin: {'latitude': 40.78382, 'longitude': -73.97536},\n  destination: {'latitude': 40.70390, 'longitude': -73.98670},\n  modes: ['foot', 'car'],\n  units: 'imperial');\n// do something with res['status'], res['routes']\n")),(0,i.kt)("h2",{id:"support"},"Support"),(0,i.kt)("p",null,"Have questions? We're here to help! Contact us at ",(0,i.kt)("a",{parentName:"p",href:"https://radar.com/support"},"radar.com/support"),"."))}g.isMDXComponent=!0},6010:function(e,t,n){function a(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(r&&(r+=" "),r+=t);return r}n.d(t,{Z:function(){return r}})}}]);