"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7306],{3905:function(e,a,t){t.d(a,{Zo:function(){return c},kt:function(){return k}});var n=t(7294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function i(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?i(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=n.createContext({}),d=function(e){var a=n.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):o(o({},a),e)),t},c=function(e){var a=d(e.components);return n.createElement(l.Provider,{value:a},e.children)},p={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},u=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=d(t),k=r,m=u["".concat(l,".").concat(k)]||u[k]||p[k]||i;return t?n.createElement(m,o(o({ref:a},c),{},{components:t})):n.createElement(m,o({ref:a},c))}));function k(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=u;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var d=2;d<i;d++)o[d]=t[d];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}u.displayName="MDXCreateElement"},8215:function(e,a,t){var n=t(7294);a.Z=function(e){var a=e.children,t=e.hidden,r=e.className;return n.createElement("div",{role:"tabpanel",hidden:t,className:r},a)}},1395:function(e,a,t){t.d(a,{Z:function(){return l}});var n=t(7294),r=t(944),i=t(6010),o="tabItem_1uMI",s="tabItemActive_2DSg";var l=function(e){var a,t=e.lazy,l=e.block,d=e.defaultValue,c=e.values,p=e.groupId,u=e.className,k=n.Children.toArray(e.children),m=null!=c?c:k.map((function(e){return{value:e.props.value,label:e.props.label}})),f=null!=d?d:null==(a=k.find((function(e){return e.props.default})))?void 0:a.props.value,h=(0,r.Z)(),g=h.tabGroupChoices,y=h.setTabGroupChoices,N=(0,n.useState)(f),v=N[0],b=N[1],w=[];if(null!=p){var C=g[p];null!=C&&C!==v&&m.some((function(e){return e.value===C}))&&b(C)}var T=function(e){var a=e.currentTarget,t=w.indexOf(a),n=m[t].value;b(n),null!=p&&(y(p,n),setTimeout((function(){var e,t,n,r,i,o,l,d;(e=a.getBoundingClientRect(),t=e.top,n=e.left,r=e.bottom,i=e.right,o=window,l=o.innerHeight,d=o.innerWidth,t>=0&&i<=d&&r<=l&&n>=0)||(a.scrollIntoView({block:"center",behavior:"smooth"}),a.classList.add(s),setTimeout((function(){return a.classList.remove(s)}),2e3))}),150))},_=function(e){var a,t=null;switch(e.key){case"ArrowRight":var n=w.indexOf(e.target)+1;t=w[n]||w[0];break;case"ArrowLeft":var r=w.indexOf(e.target)-1;t=w[r]||w[w.length-1]}null==(a=t)||a.focus()};return n.createElement("div",{className:"tabs-container"},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":l},u)},m.map((function(e){var a=e.value,t=e.label;return n.createElement("li",{role:"tab",tabIndex:v===a?0:-1,"aria-selected":v===a,className:(0,i.Z)("tabs__item",o,{"tabs__item--active":v===a}),key:a,ref:function(e){return w.push(e)},onKeyDown:_,onFocus:T,onClick:T},null!=t?t:a)}))),t?(0,n.cloneElement)(k.filter((function(e){return e.props.value===v}))[0],{className:"margin-vert--md"}):n.createElement("div",{className:"margin-vert--md"},k.map((function(e,a){return(0,n.cloneElement)(e,{key:a,hidden:e.props.value!==v})}))))}},9443:function(e,a,t){var n=(0,t(7294).createContext)(void 0);a.Z=n},944:function(e,a,t){var n=t(7294),r=t(9443);a.Z=function(){var e=(0,n.useContext)(r.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e}},970:function(e,a,t){t.d(a,{Z:function(){return d}});var n=t(7294),r="alert_19nB",i="alertWarning_1tiz",o="alertInfo_1EfW",s="alertTip_1W6d",l="alertSuccess_7EZp",d=function(e){var a=e.children,t=e.alertType;return"warning"===t?n.createElement("div",{className:"alert "+r+" "+i,role:"alert"},a):"info"===t?n.createElement("div",{className:"alert "+r+" "+o,role:"alert"},a):"tip"===t?n.createElement("div",{className:"alert "+r+" "+s,role:"alert"},a):"success"===t?n.createElement("div",{className:"alert "+r+" "+l,role:"alert"},a):null}},1535:function(e,a,t){var n=t(7294),r=t(944);a.Z=function(e){e.test;var a=e.groupId,t=e.value,i=e.children,o=(0,r.Z)(),s=o.tabGroupChoices,l=(o.setTabGroupChoices,s[a]);return null!=a&&l==t?n.createElement("span",null,i):""}},3604:function(e,a,t){var n=t(7294),r=t(944);a.Z=function(e){e.groupId;var a=e.children,t=(0,r.Z)();t.tabGroupChoices,t.setTabGroupChoices;return n.createElement("span",null,a)}},3441:function(e,a,t){t.r(a),t.d(a,{frontMatter:function(){return d},contentTitle:function(){return c},metadata:function(){return p},toc:function(){return u},default:function(){return m}});var n=t(7462),r=t(3366),i=(t(7294),t(3905)),o=t(970),s=t(1395),l=t(8215),d=(t(3604),t(1535),{title:"Fraud"}),c=void 0,p={unversionedId:"fraud",id:"fraud",isDocsHomePage:!1,title:"Fraud",description:"Fraud is available on the { }",source:"@site/docs/fraud.mdx",sourceDirName:".",slug:"/fraud",permalink:"/documentation/fraud",editUrl:"https://github.com/radarlabs/docs/edit/main/docs/fraud.mdx",tags:[],version:"current",frontMatter:{title:"Fraud"},sidebar:"defaultSidebar",previous:{title:"Beacons",permalink:"/documentation/beacons"},next:{title:"Notifications",permalink:"/documentation/notifications"}},u=[{value:"Quickstart",id:"quickstart",children:[]},{value:"How it works",id:"how-it-works",children:[]},{value:"Fraud flags",id:"fraud-flags",children:[]},{value:"Bypassing checks for testing",id:"bypassing-checks-for-testing",children:[]},{value:"Blocking users",id:"blocking-users",children:[]},{value:"Allowed states and countries",id:"allowed-states-and-countries",children:[]},{value:"Platform-specific configuration",id:"platform-specific-configuration",children:[{value:"Android",id:"android",children:[]},{value:"iOS",id:"ios",children:[]},{value:"Web and desktop",id:"web-and-desktop",children:[]}]},{value:"Verifying user locations",id:"verifying-user-locations",children:[{value:"Manual location checks",id:"manual-location-checks",children:[]},{value:"Automatic location checks with caching",id:"automatic-location-checks-with-caching",children:[]},{value:"Failure reasons",id:"failure-reasons",children:[]},{value:"Troubleshooting",id:"troubleshooting",children:[]}]},{value:"User and device risk scores",id:"user-and-device-risk-scores",children:[]},{value:"Error handling",id:"error-handling",children:[]}],k={toc:u};function m(e){var a=e.components,t=(0,r.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,n.Z)({},k,t,{components:a,mdxType:"MDXLayout"}),(0,i.kt)(o.Z,{alertType:"info",mdxType:"Alert"},"Fraud is available on the "," ",(0,i.kt)("a",{href:"https://radar.com/pricing",target:"_blank"},"Enterprise plan"),"."),(0,i.kt)("p",null,"With Fraud, you can detect GPS spoofing, proxy and VPN usage, and device tampering."),(0,i.kt)("p",null,"Along with ",(0,i.kt)("a",{parentName:"p",href:"/documentation/regions"},"Regions"),", you can also detect a user's country and state and mark specific regions as allowed or blocked to comply with regulations."),(0,i.kt)("img",{className:"hero-image--small",src:"https://images.ctfassets.net/f2vbu16fzuly/1jClpoJtUsaRkaVKM8XDt9/7b2c4ed7b2a19183e2bff5711b22c444/fraud_event.svg"}),(0,i.kt)("p",null,"Together, Fraud and Regions provide the following user context:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "fraud": {\n    "verified": true,\n    "passed": false,\n    "bypassed": false,\n    "blocked": false,\n    "mocked": true,\n    "jumped": false,\n    "compromised": false,\n    "inaccurate": false,\n    "proxy": false,\n    "sharing": false,\n    "lastMockedAt": "2023-07-27T17:18:28.536Z",\n    "lastJumpedAt": "2023-07-27T17:18:28.536Z",\n    "lastCompromisedAt": null,\n    "lastInaccurateAt": null,\n    "lastProxyAt": null,\n    "lastSharingAt": null\n  },\n  "country": {\n    "code": "US",\n    "name": "United States",\n    "flag": "\ud83c\uddfa\ud83c\uddf8",\n    "passed": true,\n    "allowed": true\n  },\n  "state": {\n    "code": "NJ",\n    "name": "New Jersey",\n    "passed": true,\n    "allowed": true,\n    "distanceToBorder": 1092,\n    "inBufferZone": false,\n    "inExclusionZone": false\n  }\n}\n')),(0,i.kt)("h2",{id:"quickstart"},"Quickstart"),(0,i.kt)("p",null,"First, ",(0,i.kt)("a",{parentName:"p",href:"https://radar.com/signup"},"sign up")," for Radar and get an API key."),(0,i.kt)("p",null,"Then, enable Fraud on the ",(0,i.kt)("a",{parentName:"p",href:"https://radar.com/dashboard/settings#fraud-settings"},"Settings page"),"."),(0,i.kt)("p",null,"From there, ",(0,i.kt)("a",{parentName:"p",href:"/documentation/sdk"},"integrate the SDK"),", complete the steps below, and call ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.trackVerified()")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.startTrackingVerified()"),". Radar will perform fraud and jurisdiction checks as described below."),(0,i.kt)("h2",{id:"how-it-works"},"How it works"),(0,i.kt)("p",null,"You can call ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.trackOnce()")," to accurately detect a user's current ",(0,i.kt)("a",{parentName:"p",href:"/documentation/geofences"},"geofences"),", current ",(0,i.kt)("a",{parentName:"p",href:"/documentation/places"},"place"),", or current ",(0,i.kt)("a",{parentName:"p",href:"/documentation/regions"},"country and state"),"."),(0,i.kt)("p",null,"However, users can spoof a device's location. For example, a gaming app user may spoof their location to access sports betting features only available in specific states. Or, a retail app user may spoof their location to access offers only available inside a store geofence."),(0,i.kt)("p",null,"To ensure you can trust a user's location, you can call ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.trackVerified()")," instead. Radar will collect a variety of fraud signals and perform fraud and jurisdiction checks, calculating flags and a signed geolocation token that you can use for fraud detection and geo-compliance in your app."),(0,i.kt)("h2",{id:"fraud-flags"},"Fraud flags"),(0,i.kt)("p",null,"If fraud detection is enabled, Radar exposes the following flags in ",(0,i.kt)("inlineCode",{parentName:"p"},"user.fraud"),":"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"mocked")),": Indicates whether a user's location is being mocked, such as in a simulator or using a location spoofing app (e.g., ",(0,i.kt)("a",{parentName:"li",href:"https://play.google.com/store/apps/details?id=com.lexa.fakegps&hl=en_US&gl=US"},"Fake GPS location"),")."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"jumped")),': Indicates whether the user moved too far too fast (e.g., "jumped" across the country in only a few seconds).'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"compromised")),": Indicates whether the user's device or app has been compromised (e.g., rooted, jailbroken) according to the ",(0,i.kt)("a",{parentName:"li",href:"https://developer.android.com/google/play/integrity"},"Play Integrity API")," on Android or ",(0,i.kt)("a",{parentName:"li",href:"https://developer.apple.com/documentation/devicecheck/preparing-to-use-the-app-attest-service"},"App Attest service")," on iOS."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"inaccurate")),": Indicates whether the user's location accuracy is too low to pass verification."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"sharing")),": Indicates whether the user is using screen sharing or remote desktop software (e.g., using ",(0,i.kt)("a",{parentName:"li",href:"https://www.teamviewer.com/en-us/"},"TeamViewer"),")."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"proxy")),": Indicates whether the user's IP address is a known proxy or VPN."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"verified")),": Indicates whether the request was made with ",(0,i.kt)("inlineCode",{parentName:"li"},"Radar.trackVerified()"),".")),(0,i.kt)("p",null,"While you can work with individual flags, Radar also exposes a single ",(0,i.kt)("inlineCode",{parentName:"p"},"user.fraud.passed")," flag that indicates whether all fraud checks passed."),(0,i.kt)("p",null,"Additionally, the ",(0,i.kt)("inlineCode",{parentName:"p"},"lastMockedAt"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"lastJumpedAt"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"lastCompromisedAt"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"lastInaccurateAt"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"lastProxyAt"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"lastSharingAt")," timestamps indicate the last time that the user failed each fraud check."),(0,i.kt)("p",null,"Finally, more detailed ",(0,i.kt)("a",{parentName:"p",href:"#failure-reasons"},"failure reasons")," are also exposed."),(0,i.kt)("h2",{id:"bypassing-checks-for-testing"},"Bypassing checks for testing"),(0,i.kt)("p",null,"If desired, you can bypass fraud checks for individual users using the ",(0,i.kt)("em",{parentName:"p"},"Mark as Bypassed")," button on the user detail page."),(0,i.kt)("p",null,"If a user is marked as bypassed, ",(0,i.kt)("inlineCode",{parentName:"p"},"user.fraud.bypassed = true")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"user.fraud.passed = true"),", regardless of whether the user passes fraud checks."),(0,i.kt)("h2",{id:"blocking-users"},"Blocking users"),(0,i.kt)("p",null,"You can also manually block a user using the ",(0,i.kt)("em",{parentName:"p"},"Mark as Blocked")," button on the user detail page."),(0,i.kt)("p",null,"If a user is blocked, ",(0,i.kt)("inlineCode",{parentName:"p"},"user.fraud.blocked = true")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"user.fraud.passed = false"),", regardless of whether the user passes fraud checks."),(0,i.kt)("h2",{id:"allowed-states-and-countries"},"Allowed states and countries"),(0,i.kt)("p",null,"With ",(0,i.kt)("a",{parentName:"p",href:"/documentation/regions"},"Regions"),", you can mark specific countries or states as allowed or blocked to comply with regulations. For example, a sportsbook or daily fantasy sports app may only be allowed to operate in specific US states."),(0,i.kt)("p",null,"Radar exposes your settings in ",(0,i.kt)("inlineCode",{parentName:"p"},"user.country.allowed")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"user.state.allowed"),"."),(0,i.kt)("p",null,"Additionally, you can enable buffer zones and exclusion zones for different states. If buffer zones and exclusion zones are enabled, ",(0,i.kt)("inlineCode",{parentName:"p"},"user.state.inBufferZone")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"user.state.inExclusionZone")," indicates whether the user is within a buffer zone or exclusion zone."),(0,i.kt)("p",null,"While you can work with individual flags, Radar also exposes ",(0,i.kt)("inlineCode",{parentName:"p"},"user.state.passed")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"user.country.passed")," flags that indicate whether all jurisdiction checks passed."),(0,i.kt)("p",null,"Finally, more detailed ",(0,i.kt)("a",{parentName:"p",href:"#failure-reasons"},"failure reasons")," are also exposed."),(0,i.kt)(o.Z,{alertType:"info",mdxType:"Alert"},"Contact your customer success manager for access to buffer zones and exclusion zones."),(0,i.kt)("h2",{id:"platform-specific-configuration"},"Platform-specific configuration"),(0,i.kt)("h3",{id:"android"},"Android"),(0,i.kt)("h4",{id:"initialize-sdk"},"Initialize SDK"),(0,i.kt)("p",null,"To support the ",(0,i.kt)("inlineCode",{parentName:"p"},"sharing")," flag on Android, pass ",(0,i.kt)("inlineCode",{parentName:"p"},"fraud = true")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.initialize()"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'Radar.initialize(\n  context = this,\n  publishableKey = "prj_test_pk...",\n  fraud = true\n)\n')),(0,i.kt)("h4",{id:"play-integrity-api"},"Play Integrity API"),(0,i.kt)("p",null,"To support the ",(0,i.kt)("inlineCode",{parentName:"p"},"compromised")," flag on Android, enable the ",(0,i.kt)("a",{parentName:"p",href:"https://developer.android.com/google/play/integrity"},"Play Integrity API")," on the ",(0,i.kt)("a",{parentName:"p",href:"https://radar.com/dashboard/settings#fraud-settings"},"Settings page"),"."),(0,i.kt)("p",null,"If the user's device or app does not meet ",(0,i.kt)("a",{parentName:"p",href:"https://developer.android.com/google/play/integrity/verdict#device-integrity-field"},"basic integrity checks"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"user.fraud.compromised = true"),"."),(0,i.kt)("p",null,"You must add the Play Integrity API dependency before calling ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.trackVerified()"),"."),(0,i.kt)("p",null,"Add the dependency to the ",(0,i.kt)("inlineCode",{parentName:"p"},"dependencies")," section of your app's ",(0,i.kt)("inlineCode",{parentName:"p"},"build.gradle")," file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},"dependencies {\n    implementation 'com.google.android.play:integrity:1.2.0'\n}\n")),(0,i.kt)("p",null,"If ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.trackVerified()")," returns ",(0,i.kt)("inlineCode",{parentName:"p"},"ERROR_FORBIDDEN"),", check the logs. The Play Services version on the device may be out of date."),(0,i.kt)("h4",{id:"ssl-pinning"},"SSL pinning"),(0,i.kt)("p",null,"To enable SSL pinning and prevent man-in-the-middle attacks, add a ",(0,i.kt)("inlineCode",{parentName:"p"},"res/xml/network_security_config.xml")," file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="utf-8"?>\n<network-security-config>\n    \x3c!-- for React Native --\x3e\n    <domain-config cleartextTrafficPermitted="true">\n        <domain includeSubdomains="true">localhost</domain>\n    </domain-config>\n\n    \x3c!-- for SSL pinning --\x3e\n    <domain-config cleartextTrafficPermitted="false">\n        <domain includeSubdomains="true">api-verified.radar.io</domain>\n        <pin-set>\n            <pin digest="SHA-256">15ktYXSSU2llpy7YyCgeqUKDBkjcimK/weUcec960sI=</pin>\n            <pin digest="SHA-256">15ktYXSSU2llpy7YyCgeqUKDBkjcimK/weUcec960sI=</pin>\n        </pin-set>\n    </domain-config>\n</network-security-config>\n')),(0,i.kt)("p",null,"Learn more about ",(0,i.kt)("a",{parentName:"p",href:"https://developer.android.com/training/articles/security-config"},"Network Security Configuration on Android"),"."),(0,i.kt)("h3",{id:"ios"},"iOS"),(0,i.kt)("h4",{id:"app-attest"},"App Attest"),(0,i.kt)("p",null,"To support the ",(0,i.kt)("inlineCode",{parentName:"p"},"compromised")," flag on iOS, enable ",(0,i.kt)("a",{parentName:"p",href:"https://developer.apple.com/documentation/devicecheck/preparing-to-use-the-app-attest-service"},"App Attest")," and configure a list of valid ",(0,i.kt)("a",{parentName:"p",href:"https://developer.apple.com/library/archive/documentation/General/Conceptual/DevPedia-CocoaCore/AppID.html"},"App IDs")," (e.g., ",(0,i.kt)("inlineCode",{parentName:"p"},"A1B2C3D4E5.com.yourapp.app1,A1B2C3D4E5.com.yourapp.app2"),") on the ",(0,i.kt)("a",{parentName:"p",href:"https://radar.com/dashboard/settings#fraud-settings"},"Settings page"),"."),(0,i.kt)("p",null,"If App Attest indicates that the user's device or app has been compromised, ",(0,i.kt)("inlineCode",{parentName:"p"},"user.fraud.compromised = true"),"."),(0,i.kt)("p",null,"App Attest requires iOS 14 and above. If ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.trackVerified()")," returns ",(0,i.kt)("inlineCode",{parentName:"p"},"ERROR_FORBIDDEN"),", check the logs. The iOS version on the device may not support App Attest."),(0,i.kt)("h4",{id:"ssl-pinning-1"},"SSL pinning"),(0,i.kt)("p",null,"To enable SSL pinning and prevent man-in-the-middle attacks, add the following to your ",(0,i.kt)("inlineCode",{parentName:"p"},"Info.plist")," file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<key>NSAppTransportSecurity</key>\n<dict>\n    <key>NSAllowsArbitraryLoads</key>\n    <false/>\n    <key>NSPinnedDomains</key>\n    <dict>\n        <key>api-verified.radar.io</key>\n        <dict>\n            <key>NSIncludesSubdomains</key>\n            <true/>\n            <key>NSPinnedLeafIdentities</key>\n            <array>\n                <dict>\n                    <key>SPKI-SHA256-BASE64</key>\n                    <string>15ktYXSSU2llpy7YyCgeqUKDBkjcimK/weUcec960sI=</string>\n                </dict>\n                <dict>\n                    <key>SPKI-SHA256-BASE64</key>\n                    <string>15ktYXSSU2llpy7YyCgeqUKDBkjcimK/weUcec960sI=</string>\n                </dict>\n            </array>\n        </dict>\n    </dict>\n</dict>\n")),(0,i.kt)("p",null,"Learn more about ",(0,i.kt)("a",{parentName:"p",href:"https://developer.apple.com/news/?id=g9ejcf8y"},"SSL pinning on iOS"),"."),(0,i.kt)("h3",{id:"web-and-desktop"},"Web and desktop"),(0,i.kt)("p",null,"The web SDK supports a companion app solution and a pure-JavaScript no-download solution."),(0,i.kt)("p",null,"The companion app solution uses the Radar Verify apps to support remote desktop detection with the ",(0,i.kt)("inlineCode",{parentName:"p"},"sharing")," flag, more advanced ",(0,i.kt)("inlineCode",{parentName:"p"},"mocked")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"proxy")," detection, and more stable device IDs. Download the ",(0,i.kt)("a",{parentName:"p",href:"https://s3.us-east-2.amazonaws.com/app.radar-verify.com/mac/releases/RadarVerifySetup.dmg"},"Radar Verify Mac app")," or the ",(0,i.kt)("a",{parentName:"p",href:"https://s3.us-east-2.amazonaws.com/app.radar-verify.com/windows/releases/RadarVerifySetup.zip"},"Radar Verify Windows app"),". By default, ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.trackVerified()")," expects the Radar Verify app to be running and returns ",(0,i.kt)("inlineCode",{parentName:"p"},"ERROR_VERIFY_APP")," if it is not."),(0,i.kt)("p",null,"To skip the Radar Verify app and use the no-download solution, pass ",(0,i.kt)("inlineCode",{parentName:"p"},"{ skipVerifyApp: true }")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.trackVerified()"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.startTrackingVerified()"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.getVerifiedLocationToken()"),"."),(0,i.kt)(o.Z,{alertType:"info",mdxType:"Alert"},"Contact your customer success manager to learn how you can customize the Radar Verify app installer or branding."),(0,i.kt)("h2",{id:"verifying-user-locations"},"Verifying user locations"),(0,i.kt)("p",null,"Once the above configuration is complete, you can perform location checks and verify a user's location with just a few lines of code."),(0,i.kt)("p",null,"Choose your implementation pattern depending on your use cases:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Less regulated gaming implementations, non-US gaming implementations, and non-gaming use cases should generally choose ",(0,i.kt)("a",{parentName:"li",href:"#manual-location-checks"},"Manual location checks")," and, on web, the no-download solution."),(0,i.kt)("li",{parentName:"ul"},"US sportsbook and iGaming use cases subject to strict regulatory requirements should generally choose ",(0,i.kt)("a",{parentName:"li",href:"#automatic-location-checks-with-caching"},"Automatic location checks with caching")," and, on web, the companion app solution.")),(0,i.kt)("h3",{id:"manual-location-checks"},"Manual location checks"),(0,i.kt)("p",null,"You can call ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.trackVerified()")," to manually perform a location check. ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.trackVerified()")," returns a ",(0,i.kt)("inlineCode",{parentName:"p"},"RadarVerifiedLocationToken")," with:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"passed"),": A boolean indicating whether the user passed all fraud and jurisdiction checks (",(0,i.kt)("inlineCode",{parentName:"li"},"user.fraud.passed && user.country.passed && user.state.passed"),")."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"token"),": A tamper-proof JSON Web Token (JWT) that you can send to your server to validate the signature, signed with the ",(0,i.kt)("em",{parentName:"li"},"JSON Web Token (JWT) Secret Key")," found under ",(0,i.kt)("em",{parentName:"li"},"Fraud")," on the ",(0,i.kt)("a",{parentName:"li",href:"https://radar.com/dashboard/settings#fraud-settings"},"Settings page"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"failureReasons"),": If ",(0,i.kt)("inlineCode",{parentName:"li"},"passed == false"),", an array of more detailed ",(0,i.kt)("a",{parentName:"li",href:"#failure-reasons"},"failure reasons"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"expiresAt"),": The datetime when the token expires, by default in 20 minutes, but earlier when close to the border (e.g., 1 minute within 1 mile of the border in New Jersey)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"expiresIn"),": The number of seconds until the token expires."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"user"),": The user, with detailed information in ",(0,i.kt)("inlineCode",{parentName:"li"},"user.fraud"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"user.country"),", and ",(0,i.kt)("inlineCode",{parentName:"li"},"user.state"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"events"),": The events generated, if any.")),(0,i.kt)(s.Z,{groupId:"fraud",defaultValue:"swift",values:[{label:"Swift",value:"swift"},{label:"Kotlin",value:"kotlin"},{label:"Web",value:"web"},{label:"React Native",value:"react-native"},{label:"Capacitor",value:"capacitor"},{label:"Flutter",value:"flutter"}],mdxType:"Tabs"},(0,i.kt)(l.Z,{value:"swift",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},"Radar.trackVerified { (status, token) in\n  if token?.passed == true {\n    // allow access, send token to server\n  } else {\n    // deny access, show error message\n  }\n}\n"))),(0,i.kt)(l.Z,{value:"kotlin",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},"Radar.trackVerified { status, token ->\n  if (token?.passed == true) {\n    // allow access, send token to server\n  } else {\n    // deny access, show error message\n  }\n}\n"))),(0,i.kt)(l.Z,{value:"web",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"const skipVerifyApp = false // use true for no-download solution\n\nRadar.trackVerified({ skipVerifyApp }).then((result) => {\n  const { passed, token, expiresIn, user } = result;\n  if (passed) {\n    // allow access, send token to server\n  } else {\n    // deny access, show error message\n  }\n}).catch((err) => {\n  // deny access, show error message\n});\n"))),(0,i.kt)(l.Z,{value:"react-native",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Radar.trackVerified().then((result) => {\n  const { token } = result;\n  if (token?.passed) {\n    // allow access, send token to server\n  } else {\n    // deny access, show error message\n  }\n}).catch((err) => {\n  // deny access, show error message\n});\n"))),(0,i.kt)(l.Z,{value:"capacitor",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Radar.trackVerified().then((result) => {\n  const { token } = result;\n  if (token?.passed) {\n    // allow access, send token to server\n  } else {\n    // deny access, show error message\n  }\n}).catch((err) => {\n  // deny access, show error message\n});\n"))),(0,i.kt)(l.Z,{value:"flutter",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"var res = await Radar.trackVerified();\n")))),(0,i.kt)("p",null,"You can send the JWT to your server and validate the signature using a ",(0,i.kt)("a",{parentName:"p",href:"https://jwt.io/libraries"},"JWT library"),". For example, in JavaScript:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"const jwt = require('jsonwebtoken');\n\ntry {\n  const decoded = jwt.verify(token, SECRET_KEY);\n  const { user } = decoded;\n  // token is valid, check payload to allow or deny access\n} catch (err) {\n  // token is invalid, deny access, show error message\n}\n")),(0,i.kt)("h3",{id:"automatic-location-checks-with-caching"},"Automatic location checks with caching"),(0,i.kt)("p",null,"You can call ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.startTrackingVerified()")," automatically perform location checks on connection changes, on the specified ",(0,i.kt)("inlineCode",{parentName:"p"},"interval"),", or more frequently if ",(0,i.kt)("inlineCode",{parentName:"p"},"token.expiresIn < interval")," (based on current state, distance to border, and so on)."),(0,i.kt)("p",null,"Instead of calling ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.trackVerified()"),", which always fetches a fresh location token, you can call ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.getVerifiedLocationToken()"),", which returns a cached location token immediately if the last location token is still valid, or fetches a fresh location token if not."),(0,i.kt)("p",null,"If you set a delegate on iOS with ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.setVerifiedDelegate()")," or a receiver on Android with ",(0,i.kt)("inlineCode",{parentName:"p"},"Radar.setVerifiedReceiver()"),", fresh location tokens are also delivered to ",(0,i.kt)("inlineCode",{parentName:"p"},"RadarVerifiedDelegate.didUpdateToken()")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"RadarVerifiedReceiver.onTokenUpdated()"),", respectively."),(0,i.kt)("p",null,"For example, to automatically verify the user's location at least every 20 minutes (1200 seconds), without ranging beacons:"),(0,i.kt)(s.Z,{groupId:"fraud",defaultValue:"swift",values:[{label:"Swift",value:"swift"},{label:"Kotlin",value:"kotlin"},{label:"Web",value:"web"},{label:"React Native",value:"react-native"},{label:"Capacitor",value:"capacitor"},{label:"Flutter",value:"flutter"}],mdxType:"Tabs"},(0,i.kt)(l.Z,{value:"swift",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},"Radar.setVerifiedDelegate(delegate)\n\nRadar.startTrackingVerified(interval: 1200, beacons: false)\n\n// get a cached token if available, or fetch a fresh token if not\nRadar.getVerifiedLocationToken { (status, token) in\n  if token?.passed == true {\n    // allow access, send token to server\n  } else {\n    // deny access, show error message\n  }\n}\n\n// delivers fresh tokens to RadarVerifiedDelegate\nfunc didUpdateToken(_ token: RadarVerifiedLocationToken) {\n  // send token to server\n}\n"))),(0,i.kt)(l.Z,{value:"kotlin",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},"Radar.setVerifiedReceiver(receiver)\n\nRadar.startTrackingVerified(interval = 1200, beacons = false)\n\n// get a cached token if available, or fetch a fresh token if not\nRadar.getVerifiedLocationToken { (status, token) in\n  if (token?.passed == true) {\n    // allow access, send token to server\n  } else {\n    // deny access, show error message\n  }\n}\n\n// delivers fresh tokens to RadarVerifiedReceiver\noverride fun onTokenUpdated(context: Context, token: RadarVerifiedLocationToken) {\n  // send token to server\n}\n"))),(0,i.kt)(l.Z,{value:"web",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"const skipVerifyApp = false // use true for no-download solution\n\nRadar.startTrackingVerified({ skipVerifyApp, interval: 1200 });\n\n// get a cached token if available, or fetch a fresh token if not\nRadar.getVerifiedLocationToken({ skipVerifyApp }).then((result) => {\n  const { passed, token, expiresIn, user } = result;\n  if (passed) {\n    // allow access, send token to server\n  } else {\n    // deny access, show error message\n  }\n}).catch((err) => {\n  // deny access, show error message\n});\n\nRadar.onTokenUpdated((result) => {\n  const { passed, token, expiresIn, user } = result;\n  // send token to server\n});\n"))),(0,i.kt)(l.Z,{value:"react-native",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Radar.startTrackingVerified({\n  interval: 1200,\n  beacons: false,\n});\n\n// get a cached token if available, or fetch a fresh token if not\nRadar.getVerifiedLocationToken().then((result) => {\n  const { token } = result;\n  if (token?.passed) {\n    // allow access, send token to server\n  } else {\n    // deny access, show error message\n  }\n}).catch((err) => {\n  // deny access, show error message\n});\n\n// delivers fresh tokens to listener\nRadar.on('token', (result) => {\n  const { token } = result;\n  // send token to server\n});\n"))),(0,i.kt)(l.Z,{value:"capacitor",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Radar.startTrackingVerified({\n  interval: 1200,\n  beacons: false,\n});\n\n// get a cached token if available, or fetch a fresh token if not\nRadar.getVerifiedLocationToken().then((result) => {\n  const { token } = result;\n  if (token?.passed) {\n    // allow access, send token to server\n  } else {\n    // deny access, show error message\n  }\n}).catch((err) => {\n  // deny access, show error message\n});\n\n// delivers fresh tokens to listener\nRadar.addListener('token', (result) => {\n  const { token } = result;\n  // send token to server\n});\n"))),(0,i.kt)(l.Z,{value:"flutter",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"Radar.startTrackingVerified(1200, false)\n\n// get a cached token if available, or fetch a fresh token if not\nvar res = await Radar.getVerifiedLocationToken();\n\n// delivers fresh tokens to listener\nRadar.onToken(onToken);\n")))),(0,i.kt)("h3",{id:"failure-reasons"},"Failure reasons"),(0,i.kt)(o.Z,{alertType:"info",mdxType:"Alert"},"Some more sensitive or proprietary failure reasons are not documented here. Contact your customer success manager for more information."),(0,i.kt)("p",null,"If ",(0,i.kt)("inlineCode",{parentName:"p"},"passed == false"),", responses include an array of more detailed ",(0,i.kt)("a",{parentName:"p",href:"#failure-reasons"},"failure reasons"),"."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"country_not_allowed")),": The user's location is in a country that is not allowed based on ",(0,i.kt)("a",{parentName:"li",href:"#allowed-states-and-countries"},"jurisdiction settings"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"country_not_expected")),": The user's location is in a country that is not expected based on ",(0,i.kt)("inlineCode",{parentName:"li"},"Radar.setExpectedJurisdiction()"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"country_in_buffer_zone")),": The user's location is too close to ",(0,i.kt)("a",{parentName:"li",href:"#allowed-states-and-countries"},"the border of a country"),', either based on a jurisdiction-specific threshold or based on the location accuracy reported by the device (i.e., a "radius of uncertainty" that overlaps a country border).'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"country_in_exclusion_zone")),": The user's location is in a ",(0,i.kt)("a",{parentName:"li",href:"#allowed-states-and-countries"},"country-specific exclusion zone"),", if enabled."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"state_not_allowed")),": The user's location is in a state or province that is not allowed according to ",(0,i.kt)("a",{parentName:"li",href:"#allowed-states-and-countries"},"jurisdiction settings")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"state_not_expected")),": The user's location is in a state or province that is not expected according to ",(0,i.kt)("inlineCode",{parentName:"li"},"Radar.setExpectedJurisdiction()"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"state_in_buffer_zone")),": The user's location is too close to ",(0,i.kt)("a",{parentName:"li",href:"#allowed-states-and-countries"},"the border of a state or province"),', either based on a jurisdiction-specific threshold or based on the location accuracy reported by the device (i.e., a "radius of uncertainty" that overlaps a state or province border).'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"state_in_exclusion_zone")),": The user's location is in a ",(0,i.kt)("a",{parentName:"li",href:"#allowed-states-and-countries"},"state- or province-specific exclusion zone"),", if enabled."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"fraud_blocked_user_id")),": The ",(0,i.kt)("inlineCode",{parentName:"li"},"userId")," of the user is blocked (all platforms)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"fraud_blocked_device_id")),": The ",(0,i.kt)("inlineCode",{parentName:"li"},"deviceId")," of the user is blocked (all platforms)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"fraud_blocked_ip")),": The IP of the user is blocked (all platforms)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"fraud_blocked_risk_score_auto_block")),": The user or device was automatically blocked based on a ",(0,i.kt)("a",{parentName:"li",href:"#fraud-flags"},"high risk score")," (all platforms)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"fraud_compromised_jailbroken")),": The user's iOS device is jailbroken (iOS only)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"fraud_compromised_app_attest")),": The user's iOS device failed ",(0,i.kt)("a",{parentName:"li",href:"#app-attest"},"App Attest")," checks (iOS only)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"fraud_compromised_play_integrity_api")),": The user's Android device failed ",(0,i.kt)("a",{parentName:"li",href:"#play-integrity-api"},"Play Integrity API")," basic integrity checks (Android only)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"fraud_mocked_from_mock_provider")),": The user's location is mocked or spoofed according to iOS, Android, macOS, or Windows location services (all platforms)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"fraud_mocked_known_spoofing_app")),": The user's device is running a known location spoofing app (macOS and Windows only)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"fraud_mocked_inconsistent_ip_country")),": The user's location is in a country inconsistent with the IP geolocation country (all platforms)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"fraud_jumped_exceeded_speed_threshold")),': The user moved too far too fast (e.g., "jumped" across the country in a few seconds), either for a single device or across devices shared by a single ',(0,i.kt)("inlineCode",{parentName:"li"},"userId"),", indicating impossible travel (all platforms)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"fraud_inaccurate_exceeded_accuracy_threshold")),": The user's location accuracy reported by the device is too low and exceeds a specified threshold (all platforms)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"fraud_sharing_known_screen_sharing_app")),": The user's device is running a known screen sharing or remote desktop app (macOS and Windows only)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"fraud_sharing_multiple_displays")),": The user's Android device has multiple displays, indicating possible screen sharing  (Android only)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"fraud_sharing_virtual_input_device")),": The user's Android device has a virtual input device, indicating possible screen sharing  (Android only)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"fraud_sharing_suspicious_touches")),": The user's Android device had suspicious touches, indicating possible screen sharing (Android only)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"fraud_proxy_known_proxy_ip")),": The user's IP address is a known proxy or VPN (all platforms)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"fraud_proxy_network_configuration")),": The user's network configuration indicates the use of a proxy or VPN (macOS and Windows only).")),(0,i.kt)("h3",{id:"troubleshooting"},"Troubleshooting"),(0,i.kt)("p",null,"To troubleshoot a failed geolocation check, go to the ",(0,i.kt)("a",{parentName:"p",href:"https://radar.com/dashboard/fraud"},"Fraud page"),". Use the ",(0,i.kt)("em",{parentName:"p"},"Filters")," button to filter down to specific user IDs, IP addresses, or jurisdictions, and use the ",(0,i.kt)("em",{parentName:"p"},"date filters")," to filter down to specific dates or times."),(0,i.kt)("p",null,"Click on a specific geolocation check to see all the details, including a map view, ",(0,i.kt)("a",{parentName:"p",href:"#failure-reasons"},"failure reasons"),", detailed user, device, IP, and jurisdiction information, and more."),(0,i.kt)(o.Z,{alertType:"info",mdxType:"Alert"},"If you need help, please contact your customer success manager."),(0,i.kt)("h2",{id:"user-and-device-risk-scores"},"User and device risk scores"),(0,i.kt)("p",null,'You can use risk scores to identify high risk users and devices. Risk scores are based on a "strikes" system:'),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"No strikes = no risk"),(0,i.kt)("li",{parentName:"ul"},"1 strike = low risk"),(0,i.kt)("li",{parentName:"ul"},"2 strikes = medium risk"),(0,i.kt)("li",{parentName:"ul"},"3 strikes = high risk")),(0,i.kt)("p",null,"Users and device receive strikes for the following fraud signals within a lookback period, by default the last 7 days:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"mocked")," flag: 2 strikes"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"jumped"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"compromised"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"sharing"),", and ",(0,i.kt)("inlineCode",{parentName:"li"},"proxy")," flags: 1 strike"),(0,i.kt)("li",{parentName:"ul"},"More than 5 user IDs per device ID: 1 strike"),(0,i.kt)("li",{parentName:"ul"},"More than 5 device IDs per user ID: 1 strike")),(0,i.kt)("p",null,"When the risk score changes for a user or device, it also changes for all associated users and devices (i.e., all users associated with that device ID, or all device IDs associated with that user)."),(0,i.kt)("p",null,"The fraud signals, number of strikes per fraud signal, and lookback period are configurable."),(0,i.kt)("p",null,"To receive real-time email alerts when users reach high risk, and to receive a weekly report with high risk users, set a ",(0,i.kt)("em",{parentName:"p"},"Notification email")," under ",(0,i.kt)("em",{parentName:"p"},"Fraud")," on the ",(0,i.kt)("a",{parentName:"p",href:"https://radar.com/dashboard/settings#fraud-settings"},"Settings page"),"."),(0,i.kt)("p",null,"You can also automatically block high risk users."),(0,i.kt)(o.Z,{alertType:"info",mdxType:"Alert"},"Contact your customer success manager for access to user and device risk scores, or to automatically block high risk users."),(0,i.kt)("h2",{id:"error-handling"},"Error handling"),(0,i.kt)("p",null,"On errors or failed fraud checks, you may want to display a message to the end user. For example:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"On ",(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"ERROR_PERMISSIONS")),": Unable to determine your location. Please make sure you've granted location permissions and try again."),(0,i.kt)("li",{parentName:"ul"},"On ",(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"ERROR_LOCATION")),": Unable to determine your location. Please make sure location services and wi-fi are enabled and try again."),(0,i.kt)("li",{parentName:"ul"},"On ",(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"ERROR_NETWORK")),": Unable to determine your location. Please make sure you're connected to the Internet and try again."),(0,i.kt)("li",{parentName:"ul"},"On ",(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"country.allowed == false"))," or ",(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"state.allowed == false")),": Unable to verify your location. Please make sure you're in an allowed area and try again."),(0,i.kt)("li",{parentName:"ul"},"On ",(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"fraud.proxy == true")),": Unable to verify your location. Please disconnect from any VPNs or proxy servers you may be using and try again."),(0,i.kt)("li",{parentName:"ul"},"On other error cases, or as a fallback: Unable to verify your location. Please contact support.")))}m.isMDXComponent=!0},6010:function(e,a,t){function n(e){var a,t,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(a=0;a<e.length;a++)e[a]&&(t=n(e[a]))&&(r&&(r+=" "),r+=t);else for(a in e)e[a]&&(r&&(r+=" "),r+=a);return r}function r(){for(var e,a,t=0,r="";t<arguments.length;)(e=arguments[t++])&&(a=n(e))&&(r&&(r+=" "),r+=a);return r}t.d(a,{Z:function(){return r}})}}]);