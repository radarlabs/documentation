---
sidebar_label: Web
title: Web SDK
description: Documentation for Web SDK
---
import Alert from '../../src/components/Alert.jsx';

This is the documentation for the Radar Web SDK.

The source can be found on GitHub [here](https://github.com/radarlabs/radar-sdk-js). Or, see the `radar-sdk-js` package on npm [here](https://www.npmjs.com/package/radar-sdk-js).

## Install

In an HTML page, include the SDK script and corresponding stylesheet:

```html
<link href="https://js.radar.com/v4.0.0/radar.css" rel="stylesheet">
<script src="https://js.radar.com/v4.0.0/radar.min.js"></script>
```

In a web app, install the package from npm:

```bash
npm install --save radar-sdk-js maplibre-gl
```
<Alert alertType='info'>
  The Radar SDK has a dependency on maplibre-gl for map rendering.
</Alert>

Then import the library and corresponding stylesheet:
```javascript
import Radar from 'radar-sdk-js';

import 'radar-sdk-js/dist/radar.css';
```

## Setup

### Initialize

To initialize the library, call the initialize function with a Radar publishable API key:

```javascript
Radar.initialize('prj_live_pk_...');
```

<Alert alertType='info'>
  Initialization is required before calling any Radar APIs or functions.
</Alert>

### Configuration

The initialize call takes an optional second argument that is an object with additional configuration options.

```javascript
Radar.initialize('prj_live_pk_...', {
  /* custom options here */
});
```

The available options are:

<div class="api-params-table">

| Name  | Default | Possible Values | Description           |
|-------|---------|-----------------|-----------------------|
|`logLevel` |`error` |`none`,`info`,`warn`,`error` |Determines the level logging output that is visible in the developer console. _log level will default to `error` when using a test publishable key._ |
|`cacheLocationMinutes` |`null` |number |Number of minutes to use a previous location before re-prompting for a new location. If `null` or `0`, will always query the device for a new location. |
|`locationMaximumAge` |`null` |number |Maximum age (in milliseconds) to use a stale browser location. See [getCurrentPosition options](https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/getCurrentPosition) |
|`locationTimeout` |`30000` |number |Number of miliseconds to wait for a device location before a timeout error is thrown. Default is 30 seconds. |
|`desiredAccuracy` |`high` |`high`,`medium`,`low` |Indicates desired level of location accuracy. _higher accuracy can result is slower response times._ |

</div>


## Track

To power [geofencing use cases](/documentation/geofencing/overview) from the web, you can leverage Radar's [track api](/documentation/api#track) to get location context and generate events.

### Identify user

To identify the user when logged in, call:

```javascript
Radar.setUserId(userId);
```

where `userId` is a stable unique ID for the user.

To set an optional dictionary of custom metadata for the user, call:

```javascript
Radar.setMetadata(metadata);
```

where `metadata` is a JSON object with up to 16 keys and values of type string, boolean, or number.

Finally, to set an optional description for the user, displayed in the dashboard, call:

```javascript
Radar.setDescription(description);
```

where `description` is a string.

You only need to call these functions once, as these settings will be persisted across browser sessions in cookies.

### Foreground tracking

Once you have initialized the SDK and the user has granted permissions, you can track the user's location.

The SDK uses the [HTML5 geolocation API](https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/Using_geolocation) to determine the user's location.

To track the user's location, call:

```javascript
Radar.trackOnce()
  .then((result) => {
    const { location, user, events } = result;
    // do something with location, user, or events
  })
  .catch((err) => {
    // handle error
  });
```

If the request is unsuccessful, `err` will be one of:

- **`RadarPublishableKeyError`**: SDK not initialized
- **`RadarLocationPermissionsError`**: location permissions not granted
- **`RadarLocationError`**: location services error or timeout (10 seconds)
- **`RadarTimeoutError`**: network timeout (10 seconds)
- **`RadarBadRequestError`**: bad request (missing or invalid params)
- **`RadarUnknownError`**: unauthorized (invalid API key)
- **`RadarPaymentRequiredError`**: payment required (organization disabled or usage exceeded)
- **`RadarForbiddenError`**: forbidden (insufficient permissions or no beta access)
- **`RadarNotFoundError`**: not found
- **`RadarRateLimitError`**: too many requests ([rate limit](/api#track) exceeded)
- **`RadarServerError`**: internal server error
- **`RadarUnknownError`**: unknown error

If the error is the result of a failed API call, additional details can be viewed by inspecting response on the error object.
```javascript
err.code; // HTTP response code
err.response; // API response body
```

### Manual tracking

It's possible to get a single device location without sending it to the server:

```javascript
Radar.getLocation()
  .then((result) => {
    // do something with result.location
  })
  .catch((err) => {
    // handle error
  });
});
```

Alternatively, you can manually update the user's location with any location by calling:

```javascript
Radar.trackOnce({
  latitude: 39.2904,
  longitude: -76.6122,
  accuracy: 65
})
.then((result) => {
  const { location, user, events } = result;
  // do something with location, user, or events
})
.catch((err) => {
  // handle error
});
```

### Get Context

With the [context API](/api#context), get context for a location without sending device or user identifiers to the server:

```javascript
Radar.getContext()
  .then((result) => {
    const { location, geofences, place, country, state, dma, postalCode } = result;
    // do something with results
  })
  .catch((err) => {
    // handle error
  });
```


## Maps APIs

### Geocoding

With the [forward geocoding API](/api#forward-geocode), geocode an address, converting address to coordinates:

```javascript
Radar.forwardGeocode({ query: '20 jay st brooklyn ny' })
  .then((result) => {
    const { addresses } = result;
    // do something with addresses
  })
  .catch((err) => {
    // handle error
  });
});
```

With the [reverse geocoding API](/api#reverse-geocode), reverse geocode a location, converting coordinates to address:

```javascript
Radar.reverseGeocode({ latitude: 40.783826, longitude: -73.975363 })
  .then((result) => {
    const { addresses } = result;
    // do something with addresses
  })
  .catch((err) => {
    // handle error
  });
```

With the [IP geocoding API](/api#ip-geocode), geocode the device's current IP address, converting IP address to city, state, and country:

```javascript
Radar.ipGeocode()
  .then((result) => {
    const { ip, address, proxy } = result;
    // do something with results
  })
  .catch((err) => {
    // handle error
  });
```

### Search

With the [autocomplete API](/api#autocomplete), autocomplete partial addresses and place names, sorted by relevance:

```javascript
Radar.autocomplete({
  query: 'brooklyn roasting',
  near: {
    latitude: 40.783826,
    longitude: -73.975363
  },
  limit: 10
})
.then((result) => {
  const { addresses } = result;
  // do something with addresses
})
.catch((err) => {
  // handle error
});
```

With the [geofence search API](/api#search-geofences), search for geofences near a location, sorted by distance:

```javascript
Radar.searchGeofences({
  radius: 1000,
  tags: ['venue'],
  limit: 10
})
.then((result) => {
  const { geofences } = result;
  // do something with geofences
})
.catch((err) => {
  // handle error
});
```

With the [places search API](/api#search-places), search for places near a location, sorted by distance:

```javascript
Radar.searchPlaces({
  near: {
    latitude: 40.783826,
    longitude: -73.975363
  },
  radius: 1000,
  chains: ['starbucks'],
  limit: 10
})
.then((result) => {
  const { places } = result;
  // do something with places
})
.catch((err) => {
  // handle error
});
```

With the [address validation API](/api#validate-an-address) (currently in beta), validate a structured address in the US or Canada:

```javascript
Radar.validateAddress({
  addressLabel: "841 Broadway Fl 7",
  city: "New York",
  stateCode: "NY",
  postalCode: "10003",
  countryCode: "US",
})
.then((result) => {
  const { address, result } = result;
  // do something with result
})
.catch((err) => {
  // handle error
});
```

### Distance

With the [distance API](/api#distance), calculate the travel distance and duration between two locations:

```javascript
Radar.distance({
  origin: {
    latitude: 40.78382,
    longitude: -73.97536
  },
  destination: {
    latitude: 40.70390,
    longitude: -73.98670
  },
  modes: [
    'foot',
    'car'
  ],
  units: 'imperial'
})
.then((result) => {
  const { routes } = result;
  const { geodesic, foot, bike, car } = routes;
})
.catch((err) => {
  // handle error
});
```

### Matrix

With the [matrix API](/api#matrix), calculate the travel distances and durations between multiple origins and destinations for up to 25 routes:

```javascript
Radar.getMatrix({
  origins: [{
    latitude: 40.70390,
    longitude: -73.98690
  }],
  destinations: [{
    latitude: 40.70390,
    longitude: -73.98690
  },
  {
    latitude: 40.73237,
    longitude: -73.94884
  }],
  modes: 'car',
  units: 'imperial'
})
.then((result) => {
  const { origins, destinations, matrix } = result;
  matrix.forEach((matrixResult) => {
    const { distance, duration, originIndex, destinationIndex } = matrixResult;
    // do something with matrix result
  });
})
.catch((err) => {
  // handle error
});
```

## Maps & UI Kits

In addition to APIs, the Radar Web SDK has built-in UI components for building rich user experiences powere by Radar.

See more info in the [Maps Platform](/documentation/maps/maps) overview.

## Support

Have questions? We're here to help! Email us at [support@radar.com](mailto:support@radar.com).
